function initMap(){function e(e,n){n.marker!=e&&(n.marker=e,n.setContent("<div>"+e.title+"</div>"),n.open(map,e),n.addListener("closeclick",function(){n.setMarker=null}))}function n(){for(var e=new google.maps.LatLngBounds,n=viewModel.searchResults().map(function(e){return e.Name.toLowerCase()}),t=0;t<markers.length;t++)n.indexOf(markers[t].title.toLowerCase())>=0?(markers[t].setMap(map),e.extend(markers[t].position)):markers[t].setMap(null);map.fitBounds(e)}map=new google.maps.Map(document.getElementById("map"),{center:{lat:40.7413549,lng:-73.9980244},zoom:13});var t=[{title:"Park Ave Penthouse",location:{lat:40.7713024,lng:-73.9632393}},{title:"Chelsea Loft",location:{lat:40.7444883,lng:-73.9949465}},{title:"Union Square Open Floor Plan",location:{lat:40.7347062,lng:-73.9895759}},{title:"East Village Hip Studio",location:{lat:40.7281777,lng:-73.984377}},{title:"TriBeCa Artsy Bachelor Pad",location:{lat:40.7195264,lng:-74.0089934}},{title:"Chinatown Homey Space",location:{lat:40.7180628,lng:-73.9961237}}];largeInfowindow=new google.maps.InfoWindow;for(var o=new google.maps.LatLngBounds,a=0;a<t.length;a++){var i=t[a].location,l=t[a].title,r=new google.maps.Marker({position:i,title:l,animation:google.maps.Animation.DROP,id:a});markers.push(r),r.addListener("click",function(){e(this,largeInfowindow)})}n(),document.getElementById("search").addEventListener("keyup",n)}function toggleBounce(e){for(var n=0;n<markers.length;n++)e===markers[n].id&&(null!==markers[n].getAnimation()?markers[n].setAnimation(null):(markers[n].setAnimation(google.maps.Animation.BOUNCE),populateInfoWindow(markers[n],largeInfowindow)))}function populateInfoWindow(e,n){n.marker!=e&&(n.marker=e,n.setContent("<div>"+e.title+"</div>"),n.open(map,e),n.addListener("closeclick",function(){n.setMarker=null}))}var map,markers=[],largeInfowindow;